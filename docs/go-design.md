# Go版セットアップツール設計

## 概要

現在のBashスクリプトベースのセットアップツールをGoで書き直し、保守性・テスト性・デバッグ性を向上させる。

## アーキテクチャ

### ディレクトリ構造

```
setup-go/
├── main.go                  # エントリーポイント
├── go.mod                   # Go モジュール定義
├── internal/
│   ├── common/             # 共通パッケージ
│   │   ├── command.go      # コマンド実行
│   │   ├── logger.go       # ログ出力
│   │   └── checker.go      # 存在確認
│   ├── installer/          # インストーラー
│   │   ├── installer.go    # 共通インターフェース
│   │   ├── nodejs.go       # Node.js インストーラー
│   │   ├── claude.go       # Claude Code インストーラー
│   │   ├── neovim.go       # Neovim インストーラー
│   │   ├── fish.go         # Fish シェル インストーラー
│   │   └── config.go       # 設定ファイル クローン
│   └── setup/              # セットアップ制御
│       └── runner.go       # 実行制御
└── docs/                   # ドキュメント
    ├── go-design.md        # この設計文書
    ├── common-package.md   # 共通パッケージ仕様
    ├── installer-package.md # インストーラー仕様
    └── main-package.md     # メイン実行部仕様
```

## 設計原則

1. **単一責任の原則**: 各パッケージは明確に分離された責任を持つ
2. **依存性注入**: テスタビリティのためインターフェースを活用
3. **エラーハンドリング**: Go慣用句に従った明示的なエラー処理
4. **ログ出力**: 構造化ログによるデバッグ支援
5. **設定駆動**: 設定ファイルによる動作カスタマイズ

## 実行フロー

1. `main.go`がエントリーポイント
2. `setup.Runner`が各インストーラーを順次実行
3. 各インストーラーは`installer.Installer`インターフェースを実装
4. 共通処理は`common`パッケージで提供
5. ログとエラーハンドリングは統一

## 利点

- **テスト性**: モックを使った単体テスト
- **デバッグ性**: 構造化ログと明確なエラー情報
- **保守性**: パッケージ分割による関心の分離
- **拡張性**: 新しいインストーラーを簡単に追加可能
- **型安全性**: Goの静的型システムによる安全性